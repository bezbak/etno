<script>
let allData = []
let activeCategory = null

fetch('/api/menu/')
  .then(r => r.json())
  .then(data => {
    allData = data
    renderTabs()
    setCategory(data[0].id)
  })

function renderTabs() {
  const tabs = document.getElementById('tabs')
  tabs.innerHTML = ''

  allData.forEach(cat => {
    const btn = document.createElement('button')
    btn.textContent = cat.name.toUpperCase()
    btn.className = `
      px-4 py-2 
      ${activeCategory === cat.id 
        ? 'text-[#fefefe]' 
        : 'opacity-60 hover:opacity-100 text-[#fefefeeb]'}
    `
    btn.onclick = () => setCategory(cat.id)
    tabs.appendChild(btn)
  })
}

function setCategory(id) {
  activeCategory = id
  renderTabs()

  const category = allData.find(c => c.id === id)
  const root = document.getElementById('menu')

  root.innerHTML = `
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6">
      ${category.dishes.map(d => `
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-[#d6c2a3]">
          
          <div class="h-40  ${d.image ?'bg-black' :'bg-gray-100'}">
            <img src="${d.image || '{%static 'no-image.jpg'%}'}"
                 alt="${d.name}"
                 class="w-full h-full object-contain">
          </div>

          <div class="p-4 space-y-2">
            <h3 class="font-bold text-lg">${d.name}</h3>
            <p class="text-sm opacity-70">${d.description || ''}</p>

            <div class="flex justify-between items-center pt-2">
              <span class="text-sm">${d.weight} –≥</span>
              <span class="font-bold text-[#8b3a3a]">${d.price} —Å–æ–º</span>
            </div>
          </div>

        </div>
      `).join('')}
    </div>
  `
}
</script>



{% comment %}  {% endcomment %}

<!-- FOOTER -->
<footer class=" relative overflow-hidden py-12 text-white"
        style="background-image:url('{%static '123.png'%}');">
          <!-- –£–ì–õ–´ -->
  <img src="{%static '1 441.svg' %}"
       class="absolute bottom-0 left-0 w-32 opacity-40 z-0" />

  <img src="{%static '1 441.svg' %}"
       class="absolute bottom-0 right-0 w-32 opacity-40 z-0 scale-x-[-1]" />

  <img src="{%static '1 441.svg' %}"
       class="absolute top-0 left-0 w-32 opacity-40 z-0 scale-y-[-1]" />

  <img src="{%static '1 441.svg' %}"
       class="absolute top-0 right-0 w-32 opacity-40 z-0 scale-x-[-1] scale-y-[-1]" />


  <!-- –ú–Ø–ì–ö–ò–ô –§–û–ù (–æ–≤–µ—Ä–ª–µ–π) -->
  <div class="absolute inset-0 bg-black opacity-55 z-0"></div>

  <!-- SVG –ù–ê–î –§–û–ù–û–ú, –ü–û–î –¢–ï–ö–°–¢–û–ú -->
  {% comment %} <img src="{% static '3.svg' %}"
       class="absolute inset-0 m-auto
              w-[420px] max-w-full
              opacity-1
              z-0
              pointer-events-none" /> {% endcomment %}

  <!-- –ö–û–ù–¢–ï–ù–¢ -->
  <div class="relative text-center z-10 max-w-4xl mx-auto px-4 grid md:grid-cols-2 gap-6">

    <div>
      <h3 class="flex gap-2 items-center justify-center text-xl font-bold mb-2"><img src="{%static 'yrt.svg'%}" class="w-16" alt=""> </h3>
      <p class="font-roboto text-white/90 text-xl font-['Marck_Script']">
        –¢–∞–º, –≥–¥–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∂–∏–≤—É—Ç. <br>
        –í–∫—É—Å, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –≤—Ä–µ–º–µ–Ω–µ–º
      </p>
    </div>

    <div class="space-y-1">
      <p class="flex gap-2 text-lg text-white">
        –ê–ª—ã–º–±–µ–∫–∞ –î–∞—Ç–∫–∏ 212/1 (–æ—Ä-—Ä –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä ¬´–ù–£–†¬ª)
      </p>
      <a href="tel:+996554448977"
         target="_blank"
         class="inline-block mt-3 text-xl  opacity-90 hover:opacity-100 transition">
        +996554448977
      </a>
      <p class="text-white/90 text-xl">üïê 11:00 ‚Äì 23:00</p>

      <div class="flex items-center justify-center gap-4">
        <a href="https://www.instagram.com/ethno.cafe"
         target="_blank"
         class="inline-block mt-3 w-12 h-12 opacity-90 hover:opacity-100 transition">
        <img src="{% static 'inst.png' %}" class="invert" alt="">
      </a>
        <a href="https://eda.yandex.kg/ru-kg/r/ethno_cafe?placeSlug=ethno_cafe"
         target="_blank"
         class="inline-block mt-3 w-12 h-12 opacity-90 hover:opacity-100 transition">
        <img src="{% static '—è.png' %}" class="invert" alt="">
      </a>
      </a>
        <a href="https://wa.me/+996554448977"
         target="_blank"
         class="inline-block mt-3 w-12 h-12 opacity-90 hover:opacity-100 transition">
        <img src="{% static 'wh.png' %}" class="invert" alt="">
      </a>
      </div>
    </div>

  </div>
</footer>

